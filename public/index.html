<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparador de Ofertas de Vuelos - Copa Airlines</title>
    <!-- Bootstrap 5 CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <style>
        body {
            background-color: #f8f9fa;
            color: #333;
        }
        .header-title {
            color: #0056b3;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background-color: #0056b3;
            border-color: #0056b3;
            font-weight: bold;
        }
        .btn-primary:hover {
            background-color: #004494;
            border-color: #004494;
        }
        .loading-spinner {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        .error-alert {
            display: none;
            margin: 20px 0;
        }
        .cheapest-card {
            background-color: #d4edda !important;
            border-left: 5px solid #28a745 !important;
            margin: 15px 0;
        }
        .global-cheapest-card {
            background-color: #ffe5b4 !important;
            border-left: 5px solid #ffca2c !important;
            margin: 20px 0;
            font-size: 1.1em;
            font-weight: bold;
        }
        .table-responsive {
            margin: 15px 0;
        }
        .table th {
            background-color: #0056b3;
            color: white;
            font-weight: bold;
        }
        .table tbody tr:hover {
            background-color: #f8f9fa;
        }
        .table tbody tr.cheapest {
            background-color: #d4edda !important;
            font-weight: bold;
        }
        .accordion-button:not(.collapsed) {
            background-color: #e9ecef;
            color: #333;
        }
        .accordion-button {
            font-weight: bold;
        }
        .pre-formatted {
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            line-height: 1.4;
        }
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            .cheapest-card, .global-cheapest-card {
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-12 text-center">
                <h1 class="header-title">
                    <i class="bi bi-airplane-engines"></i> Comparador de Ofertas de Vuelos - Copa Airlines
                </h1>
            </div>
        </div>
        
        <div class="row justify-content-center">
            <div class="col-12 col-md-6">
                <button class="btn btn-primary btn-lg w-100" onclick="fetchOffers()">
                    <i class="bi bi-search"></i> Obtener Ofertas
                </button>
            </div>
        </div>

        <!-- Loading Spinner -->
        <div class="loading-spinner" id="loading">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Cargando ofertas...</span>
            </div>
            <p class="mt-2">Buscando las mejores ofertas para MedellÃ­n, Quito, Cali, BogotÃ¡, Cartagena (stopover de ida y regreso en PanamÃ¡)...</p>
        </div>

        <!-- Error Alert -->
        <div class="alert alert-danger error-alert" role="alert" id="error">
            <i class="bi bi-exclamation-triangle-fill"></i>
            <span id="error-message"></span>
        </div>

        <!-- Global Cheapest Offer -->
        <div class="row" id="global-cheapest-section">
            <div class="col-12">
                <div class="card global-cheapest-card" id="global-cheapest-info" style="display: none;">
                    <div class="card-body">
                        <div class="pre-formatted">
                            ğŸŒâœˆï¸ Â¡AtenciÃ³n pastores y hermanos!
                            ğŸ”¥ Aprovechen esta sÃºper oferta ğŸ”¥

                            ğŸ‘‰ Pasajes stopover:
                            [ITINERARIO]
                            ğŸ’µ Todo a [PRECIO] USD ğŸ’µ

                            âœ¨ Â¡No dejen pasar esta oportunidad! âœ¨
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Individual Cheapest Offers -->
        <div class="row" id="individual-offers-section">
            <div class="col-12">
                <!-- Itinerario 1: MedellÃ­n (stopover de ida) -->
                <div class="card cheapest-card" id="cheapest-info1" style="display: none;">
                    <div class="card-body">
                        <div class="pre-formatted">
                            ğŸ‘‰ Pasajes stopover de ida (MedellÃ­n):
                            âœ… Ida âœˆï¸ Lima - PanamÃ¡
                            âœ… Vuelta âœˆï¸ PanamÃ¡ - MedellÃ­n - PanamÃ¡ - Lima 
                            ğŸ’µ Todo a [PRECIO] USD ğŸ’µ
                        </div>
                    </div>
                </div>

                <!-- Itinerario 2: Quito (stopover de ida) -->
                <div class="card cheapest-card" id="cheapest-info2" style="display: none;">
                    <div class="card-body">
                        <div class="pre-formatted">
                            ğŸ‘‰ Pasajes stopover de ida (Quito):
                            âœ… Ida âœˆï¸ Lima - PanamÃ¡
                            âœ… Vuelta âœˆï¸ PanamÃ¡ - Quito - PanamÃ¡ - Lima 
                            ğŸ’µ Todo a [PRECIO] USD ğŸ’µ
                        </div>
                    </div>
                </div>

                <!-- Itinerario 3: Cali (stopover de ida) -->
                <div class="card cheapest-card" id="cheapest-info3" style="display: none;">
                    <div class="card-body">
                        <div class="pre-formatted">
                            ğŸ‘‰ Pasajes stopover de ida (Cali):
                            âœ… Ida âœˆï¸ Lima - PanamÃ¡
                            âœ… Vuelta âœˆï¸ PanamÃ¡ - Cali - PanamÃ¡ - Lima 
                            ğŸ’µ Todo a [PRECIO] USD ğŸ’µ
                        </div>
                    </div>
                </div>

                <!-- Itinerario 4: BogotÃ¡ (stopover de ida) -->
                <div class="card cheapest-card" id="cheapest-info4" style="display: none;">
                    <div class="card-body">
                        <div class="pre-formatted">
                            ğŸ‘‰ Pasajes stopover de ida (BogotÃ¡):
                            âœ… Ida âœˆï¸ Lima - PanamÃ¡
                            âœ… Vuelta âœˆï¸ PanamÃ¡ - BogotÃ¡ - PanamÃ¡ - Lima 
                            ğŸ’µ Todo a [PRECIO] USD ğŸ’µ
                        </div>
                    </div>
                </div>

                <!-- Itinerario 5: Cartagena (stopover de ida) -->
                <div class="card cheapest-card" id="cheapest-info5" style="display: none;">
                    <div class="card-body">
                        <div class="pre-formatted">
                            ğŸ‘‰ Pasajes stopover de ida (Cartagena):
                            âœ… Ida âœˆï¸ Lima - PanamÃ¡
                            âœ… Vuelta âœˆï¸ PanamÃ¡ - Cartagena - PanamÃ¡ - Lima 
                            ğŸ’µ Todo a [PRECIO] USD ğŸ’µ
                        </div>
                    </div>
                </div>

                <!-- Itinerario 6: MedellÃ­n (stopover de regreso) -->
                <div class="card cheapest-card" id="cheapest-info6" style="display: none;">
                    <div class="card-body">
                        <div class="pre-formatted">
                            ğŸ‘‰ Pasajes stopover de regreso (MedellÃ­n):
                            âœ… Ida âœˆï¸ Lima - PanamÃ¡ - MedellÃ­n - PanamÃ¡
                            âœ… Vuelta âœˆï¸ PanamÃ¡ - Lima 
                            ğŸ’µ Todo a [PRECIO] USD ğŸ’µ
                        </div>
                    </div>
                </div>

                <!-- Itinerario 7: Quito (stopover de regreso) -->
                <div class="card cheapest-card" id="cheapest-info7" style="display: none;">
                    <div class="card-body">
                        <div class="pre-formatted">
                            ğŸ‘‰ Pasajes stopover de regreso (Quito):
                            âœ… Ida âœˆï¸ Lima - PanamÃ¡ - Quito - PanamÃ¡
                            âœ… Vuelta âœˆï¸ PanamÃ¡ - Lima 
                            ğŸ’µ Todo a [PRECIO] USD ğŸ’µ
                        </div>
                    </div>
                </div>

                <!-- Itinerario 8: Cali (stopover de regreso) -->
                <div class="card cheapest-card" id="cheapest-info8" style="display: none;">
                    <div class="card-body">
                        <div class="pre-formatted">
                            ğŸ‘‰ Pasajes stopover de regreso (Cali):
                            âœ… Ida âœˆï¸ Lima - PanamÃ¡ - Cali - PanamÃ¡
                            âœ… Vuelta âœˆï¸ PanamÃ¡ - Lima 
                            ğŸ’µ Todo a [PRECIO] USD ğŸ’µ
                        </div>
                    </div>
                </div>

                <!-- Itinerario 9: BogotÃ¡ (stopover de regreso) -->
                <div class="card cheapest-card" id="cheapest-info9" style="display: none;">
                    <div class="card-body">
                        <div class="pre-formatted">
                            ğŸ‘‰ Pasajes stopover de regreso (BogotÃ¡):
                            âœ… Ida âœˆï¸ Lima - PanamÃ¡ - BogotÃ¡ - PanamÃ¡
                            âœ… Vuelta âœˆï¸ PanamÃ¡ - Lima 
                            ğŸ’µ Todo a [PRECIO] USD ğŸ’µ
                        </div>
                    </div>
                </div>

                <!-- Itinerario 10: Cartagena (stopover de regreso) -->
                <div class="card cheapest-card" id="cheapest-info10" style="display: none;">
                    <div class="card-body">
                        <div class="pre-formatted">
                            ğŸ‘‰ Pasajes stopover de regreso (Cartagena):
                            âœ… Ida âœˆï¸ Lima - PanamÃ¡ - Cartagena - PanamÃ¡
                            âœ… Vuelta âœˆï¸ PanamÃ¡ - Lima 
                            ğŸ’µ Todo a [PRECIO] USD ğŸ’µ
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detailed Tables (Colapsables) -->
        <div class="row" id="detailed-tables-section">
            <div class="col-12">
                <div class="accordion" id="offersAccordion">
                    <!-- Itinerario 1: MedellÃ­n (stopover de ida) -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1" aria-expanded="false" aria-controls="collapse1">
                                ğŸ“‹ Detalles - Itinerario 1: Lima â†’ PanamÃ¡ â†’ MedellÃ­n â†’ Lima
                            </button>
                        </h2>
                        <div id="collapse1" class="accordion-collapse collapse" data-bs-parent="#offersAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover" id="offers-table1">
                                        <thead>
                                            <tr>
                                                <th>ID de Oferta</th>
                                                <th>Claves de Soluciones</th>
                                                <th>Precio por Adulto (USD)</th>
                                                <th>Familia de Tarifa</th>
                                                <th>Clase de Servicio</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Itinerario 2: Quito (stopover de ida) -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2" aria-expanded="false" aria-controls="collapse2">
                                ğŸ“‹ Detalles - Itinerario 2: Lima â†’ PanamÃ¡ â†’ Quito â†’ Lima
                            </button>
                        </h2>
                        <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#offersAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover" id="offers-table2">
                                        <thead>
                                            <tr>
                                                <th>ID de Oferta</th>
                                                <th>Claves de Soluciones</th>
                                                <th>Precio por Adulto (USD)</th>
                                                <th>Familia de Tarifa</th>
                                                <th>Clase de Servicio</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Itinerario 3: Cali (stopover de ida) -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3" aria-expanded="false" aria-controls="collapse3">
                                ğŸ“‹ Detalles - Itinerario 3: Lima â†’ PanamÃ¡ â†’ Cali â†’ Lima
                            </button>
                        </h2>
                        <div id="collapse3" class="accordion-collapse collapse" data-bs-parent="#offersAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover" id="offers-table3">
                                        <thead>
                                            <tr>
                                                <th>ID de Oferta</th>
                                                <th>Claves de Soluciones</th>
                                                <th>Precio por Adulto (USD)</th>
                                                <th>Familia de Tarifa</th>
                                                <th>Clase de Servicio</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Itinerario 4: BogotÃ¡ (stopover de ida) -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4" aria-expanded="false" aria-controls="collapse4">
                                ğŸ“‹ Detalles - Itinerario 4: Lima â†’ PanamÃ¡ â†’ BogotÃ¡ â†’ Lima
                            </button>
                        </h2>
                        <div id="collapse4" class="accordion-collapse collapse" data-bs-parent="#offersAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover" id="offers-table4">
                                        <thead>
                                            <tr>
                                                <th>ID de Oferta</th>
                                                <th>Claves de Soluciones</th>
                                                <th>Precio por Adulto (USD)</th>
                                                <th>Familia de Tarifa</th>
                                                <th>Clase de Servicio</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Itinerario 5: Cartagena (stopover de ida) -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5" aria-expanded="false" aria-controls="collapse5">
                                ğŸ“‹ Detalles - Itinerario 5: Lima â†’ PanamÃ¡ â†’ Cartagena â†’ Lima
                            </button>
                        </h2>
                        <div id="collapse5" class="accordion-collapse collapse" data-bs-parent="#offersAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover" id="offers-table5">
                                        <thead>
                                            <tr>
                                                <th>ID de Oferta</th>
                                                <th>Claves de Soluciones</th>
                                                <th>Precio por Adulto (USD)</th>
                                                <th>Familia de Tarifa</th>
                                                <th>Clase de Servicio</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Itinerario 6: MedellÃ­n (stopover de regreso) -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6" aria-expanded="false" aria-controls="collapse6">
                                ğŸ“‹ Detalles - Itinerario 6: Lima â†’ PanamÃ¡ â†’ MedellÃ­n â†’ PanamÃ¡ â†’ Lima
                            </button>
                        </h2>
                        <div id="collapse6" class="accordion-collapse collapse" data-bs-parent="#offersAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover" id="offers-table6">
                                        <thead>
                                            <tr>
                                                <th>ID de Oferta</th>
                                                <th>Claves de Soluciones</th>
                                                <th>Precio por Adulto (USD)</th>
                                                <th>Familia de Tarifa</th>
                                                <th>Clase de Servicio</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Itinerario 7: Quito (stopover de regreso) -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse7" aria-expanded="false" aria-controls="collapse7">
                                ğŸ“‹ Detalles - Itinerario 7: Lima â†’ PanamÃ¡ â†’ Quito â†’ PanamÃ¡ â†’ Lima
                            </button>
                        </h2>
                        <div id="collapse7" class="accordion-collapse collapse" data-bs-parent="#offersAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover" id="offers-table7">
                                        <thead>
                                            <tr>
                                                <th>ID de Oferta</th>
                                                <th>Claves de Soluciones</th>
                                                <th>Precio por Adulto (USD)</th>
                                                <th>Familia de Tarifa</th>
                                                <th>Clase de Servicio</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Itinerario 8: Cali (stopover de regreso) -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8" aria-expanded="false" aria-controls="collapse8">
                                ğŸ“‹ Detalles - Itinerario 8: Lima â†’ PanamÃ¡ â†’ Cali â†’ PanamÃ¡ â†’ Lima
                            </button>
                        </h2>
                        <div id="collapse8" class="accordion-collapse collapse" data-bs-parent="#offersAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover" id="offers-table8">
                                        <thead>
                                            <tr>
                                                <th>ID de Oferta</th>
                                                <th>Claves de Soluciones</th>
                                                <th>Precio por Adulto (USD)</th>
                                                <th>Familia de Tarifa</th>
                                                <th>Clase de Servicio</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Itinerario 9: BogotÃ¡ (stopover de regreso) -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse9" aria-expanded="false" aria-controls="collapse9">
                                ğŸ“‹ Detalles - Itinerario 9: Lima â†’ PanamÃ¡ â†’ BogotÃ¡ â†’ PanamÃ¡ â†’ Lima
                            </button>
                        </h2>
                        <div id="collapse9" class="accordion-collapse collapse" data-bs-parent="#offersAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover" id="offers-table9">
                                        <thead>
                                            <tr>
                                                <th>ID de Oferta</th>
                                                <th>Claves de Soluciones</th>
                                                <th>Precio por Adulto (USD)</th>
                                                <th>Familia de Tarifa</th>
                                                <th>Clase de Servicio</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Itinerario 10: Cartagena (stopover de regreso) -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10" aria-expanded="false" aria-controls="collapse10">
                                ğŸ“‹ Detalles - Itinerario 10: Lima â†’ PanamÃ¡ â†’ Cartagena â†’ PanamÃ¡ â†’ Lima
                            </button>
                        </h2>
                        <div id="collapse10" class="accordion-collapse collapse" data-bs-parent="#offersAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover" id="offers-table10">
                                        <thead>
                                            <tr>
                                                <th>ID de Oferta</th>
                                                <th>Claves de Soluciones</th>
                                                <th>Precio por Adulto (USD)</th>
                                                <th>Familia de Tarifa</th>
                                                <th>Clase de Servicio</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        async function fetchOffers() {
            const loading = document.getElementById('loading');
            const errorDiv = document.getElementById('error');
            const globalCheapestInfo = document.getElementById('global-cheapest-info');
            const cheapestInfo1 = document.getElementById('cheapest-info1');
            const cheapestInfo2 = document.getElementById('cheapest-info2');
            const cheapestInfo3 = document.getElementById('cheapest-info3');
            const cheapestInfo4 = document.getElementById('cheapest-info4');
            const cheapestInfo5 = document.getElementById('cheapest-info5');
            const cheapestInfo6 = document.getElementById('cheapest-info6');
            const cheapestInfo7 = document.getElementById('cheapest-info7');
            const cheapestInfo8 = document.getElementById('cheapest-info8');
            const cheapestInfo9 = document.getElementById('cheapest-info9');
            const cheapestInfo10 = document.getElementById('cheapest-info10');
            const table1 = document.getElementById('offers-table1');
            const table2 = document.getElementById('offers-table2');
            const table3 = document.getElementById('offers-table3');
            const table4 = document.getElementById('offers-table4');
            const table5 = document.getElementById('offers-table5');
            const table6 = document.getElementById('offers-table6');
            const table7 = document.getElementById('offers-table7');
            const table8 = document.getElementById('offers-table8');
            const table9 = document.getElementById('offers-table9');
            const table10 = document.getElementById('offers-table10');
            const tbody1 = table1.querySelector('tbody');
            const tbody2 = table2.querySelector('tbody');
            const tbody3 = table3.querySelector('tbody');
            const tbody4 = table4.querySelector('tbody');
            const tbody5 = table5.querySelector('tbody');
            const tbody6 = table6.querySelector('tbody');
            const tbody7 = table7.querySelector('tbody');
            const tbody8 = table8.querySelector('tbody');
            const tbody9 = table9.querySelector('tbody');
            const tbody10 = table10.querySelector('tbody');

            loading.style.display = 'block';
            errorDiv.style.display = 'none';
            globalCheapestInfo.style.display = 'none';
            cheapestInfo1.style.display = 'none';
            cheapestInfo2.style.display = 'none';
            cheapestInfo3.style.display = 'none';
            cheapestInfo4.style.display = 'none';
            cheapestInfo5.style.display = 'none';
            cheapestInfo6.style.display = 'none';
            cheapestInfo7.style.display = 'none';
            cheapestInfo8.style.display = 'none';
            cheapestInfo9.style.display = 'none';
            cheapestInfo10.style.display = 'none';
            table1.style.display = 'none';
            table2.style.display = 'none';
            table3.style.display = 'none';
            table4.style.display = 'none';
            table5.style.display = 'none';
            table6.style.display = 'none';
            table7.style.display = 'none';
            table8.style.display = 'none';
            table9.style.display = 'none';
            table10.style.display = 'none';
            tbody1.innerHTML = '';
            tbody2.innerHTML = '';
            tbody3.innerHTML = '';
            tbody4.innerHTML = '';
            tbody5.innerHTML = '';
            tbody6.innerHTML = '';
            tbody7.innerHTML = '';
            tbody8.innerHTML = '';
            tbody9.innerHTML = '';
            tbody10.innerHTML = '';

            try {
                const response = await fetch('/api/offers');
                if (!response.ok) throw new Error(`HTTP error: ${response.status}`);
                const data = await response.json();

                if (data.error) {
                    throw new Error(data.error);
                }

                // Mostrar oferta mÃ¡s barata global
                if (data.globalCheapest) {
                    const itineraryText = 
                        data.globalCheapest.itinerary === 'LIM -> PTY -> MDE -> LIM' ?
                        `âœ… Ida âœˆï¸ Lima - PanamÃ¡\nâœ… Vuelta âœˆï¸ PanamÃ¡ - MedellÃ­n - PanamÃ¡ - Lima` :
                        data.globalCheapest.itinerary === 'LIM -> PTY -> UIO -> LIM' ?
                        `âœ… Ida âœˆï¸ Lima - PanamÃ¡\nâœ… Vuelta âœˆï¸ PanamÃ¡ - Quito - PanamÃ¡ - Lima` :
                        data.globalCheapest.itinerary === 'LIM -> PTY -> CLO -> LIM' ?
                        `âœ… Ida âœˆï¸ Lima - PanamÃ¡\nâœ… Vuelta âœˆï¸ PanamÃ¡ - Cali - PanamÃ¡ - Lima` :
                        data.globalCheapest.itinerary === 'LIM -> PTY -> BOG -> LIM' ?
                        `âœ… Ida âœˆï¸ Lima - PanamÃ¡\nâœ… Vuelta âœˆï¸ PanamÃ¡ - BogotÃ¡ - PanamÃ¡ - Lima` :
                        data.globalCheapest.itinerary === 'LIM -> PTY -> CTG -> LIM' ?
                        `âœ… Ida âœˆï¸ Lima - PanamÃ¡\nâœ… Vuelta âœˆï¸ PanamÃ¡ - Cartagena - PanamÃ¡ - Lima` :
                        data.globalCheapest.itinerary === 'LIM -> MDE -> PTY -> LIM' ?
                        `âœ… Ida âœˆï¸ Lima - PanamÃ¡ - MedellÃ­n - PanamÃ¡\nâœ… Vuelta âœˆï¸ PanamÃ¡ - Lima` :
                        data.globalCheapest.itinerary === 'LIM -> UIO -> PTY -> LIM' ?
                        `âœ… Ida âœˆï¸ Lima - PanamÃ¡ - Quito - PanamÃ¡\nâœ… Vuelta âœˆï¸ PanamÃ¡ - Lima` :
                        data.globalCheapest.itinerary === 'LIM -> CLO -> PTY -> LIM' ?
                        `âœ… Ida âœˆï¸ Lima - PanamÃ¡ - Cali - PanamÃ¡\nâœ… Vuelta âœˆï¸ PanamÃ¡ - Lima` :
                        data.globalCheapest.itinerary === 'LIM -> BOG -> PTY -> LIM' ?
                        `âœ… Ida âœˆï¸ Lima - PanamÃ¡ - BogotÃ¡ - PanamÃ¡\nâœ… Vuelta âœˆï¸ PanamÃ¡ - Lima` :
                        `âœ… Ida âœˆï¸ Lima - PanamÃ¡ - Cartagena - PanamÃ¡\nâœ… Vuelta âœˆï¸ PanamÃ¡ - Lima`;
                    globalCheapestInfo.innerHTML = `<div class="pre-formatted">
ğŸŒâœˆï¸ Â¡AtenciÃ³n pastores y hermanos!
ğŸ”¥ Aprovechen esta sÃºper oferta ğŸ”¥

ğŸ‘‰ Pasajes stopover:
${itineraryText} 
ğŸ’µ Todo a ${data.globalCheapest.price} USD ğŸ’µ

âœ¨ Â¡No dejen pasar esta oportunidad! âœ¨
                    </div>`;
                    globalCheapestInfo.style.display = 'block';
                }

                // Mostrar ofertas mÃ¡s baratas individuales
                // Itinerario 1 (MDE, stopover de ida)
                if (data.itinerary1.cheapest) {
                    cheapestInfo1.innerHTML = `<div class="pre-formatted">
ğŸ‘‰ Pasajes stopover de ida (MedellÃ­n):
âœ… Ida âœˆï¸ Lima - PanamÃ¡
âœ… Vuelta âœˆï¸ PanamÃ¡ - MedellÃ­n - PanamÃ¡ - Lima 
ğŸ’µ Todo a ${data.itinerary1.cheapest.price} USD ğŸ’µ
                    </div>`;
                    cheapestInfo1.style.display = 'block';
                    data.itinerary1.offers.forEach(offer => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${offer.id}</td>
                            <td>${offer.solutionKeys}</td>
                            <td>$${offer.pricePerAdult}</td>
                            <td>${offer.fareFamily}</td>
                            <td>${offer.classOfService}</td>
                        `;
                        if (data.itinerary1.cheapest && data.itinerary1.cheapest.offerIds.includes(offer.id)) {
                            row.classList.add('cheapest');
                        }
                        tbody1.appendChild(row);
                    });
                    table1.style.display = 'table';
                } else if (data.itinerary1.error) {
                    errorDiv.innerHTML = `<i class="bi bi-exclamation-triangle-fill"></i> Error en itinerario 1 (MedellÃ­n, stopover de ida): ${data.itinerary1.error}`;
                    errorDiv.style.display = 'block';
                }

                // Itinerario 2 (UIO, stopover de ida)
                if (data.itinerary2.cheapest) {
                    cheapestInfo2.innerHTML = `<div class="pre-formatted">
ğŸ‘‰ Pasajes stopover de ida (Quito):
âœ… Ida âœˆï¸ Lima - PanamÃ¡
âœ… Vuelta âœˆï¸ PanamÃ¡ - Quito - PanamÃ¡ - Lima 
ğŸ’µ Todo a ${data.itinerary2.cheapest.price} USD ğŸ’µ
                    </div>`;
                    cheapestInfo2.style.display = 'block';
                    data.itinerary2.offers.forEach(offer => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${offer.id}</td>
                            <td>${offer.solutionKeys}</td>
                            <td>$${offer.pricePerAdult}</td>
                            <td>${offer.fareFamily}</td>
                            <td>${offer.classOfService}</td>
                        `;
                        if (data.itinerary2.cheapest && data.itinerary2.cheapest.offerIds.includes(offer.id)) {
                            row.classList.add('cheapest');
                        }
                        tbody2.appendChild(row);
                    });
                    table2.style.display = 'table';
                } else if (data.itinerary2.error) {
                    errorDiv.innerHTML = `<i class="bi bi-exclamation-triangle-fill"></i> Error en itinerario 2 (Quito, stopover de ida): ${data.itinerary2.error}`;
                    errorDiv.style.display = 'block';
                }

                // Itinerario 3 (CLO, stopover de ida)
                if (data.itinerary3.cheapest) {
                    cheapestInfo3.innerHTML = `<div class="pre-formatted">
ğŸ‘‰ Pasajes stopover de ida (Cali):
âœ… Ida âœˆï¸ Lima - PanamÃ¡
âœ… Vuelta âœˆï¸ PanamÃ¡ - Cali - PanamÃ¡ - Lima 
ğŸ’µ Todo a ${data.itinerary3.cheapest.price} USD ğŸ’µ
                    </div>`;
                    cheapestInfo3.style.display = 'block';
                    data.itinerary3.offers.forEach(offer => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${offer.id}</td>
                            <td>${offer.solutionKeys}</td>
                            <td>$${offer.pricePerAdult}</td>
                            <td>${offer.fareFamily}</td>
                            <td>${offer.classOfService}</td>
                        `;
                        if (data.itinerary3.cheapest && data.itinerary3.cheapest.offerIds.includes(offer.id)) {
                            row.classList.add('cheapest');
                        }
                        tbody3.appendChild(row);
                    });
                    table3.style.display = 'table';
                } else if (data.itinerary3.error) {
                    errorDiv.innerHTML = `<i class="bi bi-exclamation-triangle-fill"></i> Error en itinerario 3 (Cali, stopover de ida): ${data.itinerary3.error}`;
                    errorDiv.style.display = 'block';
                }

                // Itinerario 4 (BOG, stopover de ida)
                if (data.itinerary4.cheapest) {
                    cheapestInfo4.innerHTML = `<div class="pre-formatted">
ğŸ‘‰ Pasajes stopover de ida (BogotÃ¡):
âœ… Ida âœˆï¸ Lima - PanamÃ¡
âœ… Vuelta âœˆï¸ PanamÃ¡ - BogotÃ¡ - PanamÃ¡ - Lima 
ğŸ’µ Todo a ${data.itinerary4.cheapest.price} USD ğŸ’µ
                    </div>`;
                    cheapestInfo4.style.display = 'block';
                    data.itinerary4.offers.forEach(offer => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${offer.id}</td>
                            <td>${offer.solutionKeys}</td>
                            <td>$${offer.pricePerAdult}</td>
                            <td>${offer.fareFamily}</td>
                            <td>${offer.classOfService}</td>
                        `;
                        if (data.itinerary4.cheapest && data.itinerary4.cheapest.offerIds.includes(offer.id)) {
                            row.classList.add('cheapest');
                        }
                        tbody4.appendChild(row);
                    });
                    table4.style.display = 'table';
                } else if (data.itinerary4.error) {
                    errorDiv.innerHTML = `<i class="bi bi-exclamation-triangle-fill"></i> Error en itinerario 4 (BogotÃ¡, stopover de ida): ${data.itinerary4.error}`;
                    errorDiv.style.display = 'block';
                }

                // Itinerario 5 (CTG, stopover de ida)
                if (data.itinerary5.cheapest) {
                    cheapestInfo5.innerHTML = `<div class="pre-formatted">
ğŸ‘‰ Pasajes stopover de ida (Cartagena):
âœ… Ida âœˆï¸ Lima - PanamÃ¡
âœ… Vuelta âœˆï¸ PanamÃ¡ - Cartagena - PanamÃ¡ - Lima 
ğŸ’µ Todo a ${data.itinerary5.cheapest.price} USD ğŸ’µ
                    </div>`;
                    cheapestInfo5.style.display = 'block';
                    data.itinerary5.offers.forEach(offer => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${offer.id}</td>
                            <td>${offer.solutionKeys}</td>
                            <td>$${offer.pricePerAdult}</td>
                            <td>${offer.fareFamily}</td>
                            <td>${offer.classOfService}</td>
                        `;
                        if (data.itinerary5.cheapest && data.itinerary5.cheapest.offerIds.includes(offer.id)) {
                            row.classList.add('cheapest');
                        }
                        tbody5.appendChild(row);
                    });
                    table5.style.display = 'table';
                } else if (data.itinerary5.error) {
                    errorDiv.innerHTML = `<i class="bi bi-exclamation-triangle-fill"></i> Error en itinerario 5 (Cartagena, stopover de ida): ${data.itinerary5.error}`;
                    errorDiv.style.display = 'block';
                }

                // Itinerario 6 (MDE, stopover de regreso)
                if (data.itinerary6.cheapest) {
                    cheapestInfo6.innerHTML = `<div class="pre-formatted">
ğŸ‘‰ Pasajes stopover de regreso (MedellÃ­n):
âœ… Ida âœˆï¸ Lima - PanamÃ¡ - MedellÃ­n - PanamÃ¡
âœ… Vuelta âœˆï¸ PanamÃ¡ - Lima 
ğŸ’µ Todo a ${data.itinerary6.cheapest.price} USD ğŸ’µ
                    </div>`;
                    cheapestInfo6.style.display = 'block';
                    data.itinerary6.offers.forEach(offer => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${offer.id}</td>
                            <td>${offer.solutionKeys}</td>
                            <td>$${offer.pricePerAdult}</td>
                            <td>${offer.fareFamily}</td>
                            <td>${offer.classOfService}</td>
                        `;
                        if (data.itinerary6.cheapest && data.itinerary6.cheapest.offerIds.includes(offer.id)) {
                            row.classList.add('cheapest');
                        }
                        tbody6.appendChild(row);
                    });
                    table6.style.display = 'table';
                } else if (data.itinerary6.error) {
                    errorDiv.innerHTML = `<i class="bi bi-exclamation-triangle-fill"></i> Error en itinerario 6 (MedellÃ­n, stopover de regreso): ${data.itinerary6.error}`;
                    errorDiv.style.display = 'block';
                }

                // Itinerario 7 (UIO, stopover de regreso)
                if (data.itinerary7.cheapest) {
                    cheapestInfo7.innerHTML = `<div class="pre-formatted">
ğŸ‘‰ Pasajes stopover de regreso (Quito):
âœ… Ida âœˆï¸ Lima - PanamÃ¡ - Quito - PanamÃ¡
âœ… Vuelta âœˆï¸ PanamÃ¡ - Lima 
ğŸ’µ Todo a ${data.itinerary7.cheapest.price} USD ğŸ’µ
                    </div>`;
                    cheapestInfo7.style.display = 'block';
                    data.itinerary7.offers.forEach(offer => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${offer.id}</td>
                            <td>${offer.solutionKeys}</td>
                            <td>$${offer.pricePerAdult}</td>
                            <td>${offer.fareFamily}</td>
                            <td>${offer.classOfService}</td>
                        `;
                        if (data.itinerary7.cheapest && data.itinerary7.cheapest.offerIds.includes(offer.id)) {
                            row.classList.add('cheapest');
                        }
                        tbody7.appendChild(row);
                    });
                    table7.style.display = 'table';
                } else if (data.itinerary7.error) {
                    errorDiv.innerHTML = `<i class="bi bi-exclamation-triangle-fill"></i> Error en itinerario 7 (Quito, stopover de regreso): ${data.itinerary7.error}`;
                    errorDiv.style.display = 'block';
                }

                // Itinerario 8 (CLO, stopover de regreso)
                if (data.itinerary8.cheapest) {
                    cheapestInfo8.innerHTML = `<div class="pre-formatted">
ğŸ‘‰ Pasajes stopover de regreso (Cali):
âœ… Ida âœˆï¸ Lima - PanamÃ¡ - Cali - PanamÃ¡
âœ… Vuelta âœˆï¸ PanamÃ¡ - Lima 
ğŸ’µ Todo a ${data.itinerary8.cheapest.price} USD ğŸ’µ
                    </div>`;
                    cheapestInfo8.style.display = 'block';
                    data.itinerary8.offers.forEach(offer => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${offer.id}</td>
                            <td>${offer.solutionKeys}</td>
                            <td>$${offer.pricePerAdult}</td>
                            <td>${offer.fareFamily}</td>
                            <td>${offer.classOfService}</td>
                        `;
                        if (data.itinerary8.cheapest && data.itinerary8.cheapest.offerIds.includes(offer.id)) {
                            row.classList.add('cheapest');
                        }
                        tbody8.appendChild(row);
                    });
                    table8.style.display = 'table';
                } else if (data.itinerary8.error) {
                    errorDiv.innerHTML = `<i class="bi bi-exclamation-triangle-fill"></i> Error en itinerario 8 (Cali, stopover de regreso): ${data.itinerary8.error}`;
                    errorDiv.style.display = 'block';
                }

                // Itinerario 9 (BOG, stopover de regreso)
                if (data.itinerary9.cheapest) {
                    cheapestInfo9.innerHTML = `<div class="pre-formatted">
ğŸ‘‰ Pasajes stopover de regreso (BogotÃ¡):
âœ… Ida âœˆï¸ Lima - PanamÃ¡ - BogotÃ¡ - PanamÃ¡
âœ… Vuelta âœˆï¸ PanamÃ¡ - Lima 
ğŸ’µ Todo a ${data.itinerary9.cheapest.price} USD ğŸ’µ
                    </div>`;
                    cheapestInfo9.style.display = 'block';
                    data.itinerary9.offers.forEach(offer => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${offer.id}</td>
                            <td>${offer.solutionKeys}</td>
                            <td>$${offer.pricePerAdult}</td>
                            <td>${offer.fareFamily}</td>
                            <td>${offer.classOfService}</td>
                        `;
                        if (data.itinerary9.cheapest && data.itinerary9.cheapest.offerIds.includes(offer.id)) {
                            row.classList.add('cheapest');
                        }
                        tbody9.appendChild(row);
                    });
                    table9.style.display = 'table';
                } else if (data.itinerary9.error) {
                    errorDiv.innerHTML = `<i class="bi bi-exclamation-triangle-fill"></i> Error en itinerario 9 (BogotÃ¡, stopover de regreso): ${data.itinerary9.error}`;
                    errorDiv.style.display = 'block';
                }

                // Itinerario 10 (CTG, stopover de regreso)
                if (data.itinerary10.cheapest) {
                    cheapestInfo10.innerHTML = `<div class="pre-formatted">
ğŸ‘‰ Pasajes stopover de regreso (Cartagena):
âœ… Ida âœˆï¸ Lima - PanamÃ¡ - Cartagena - PanamÃ¡
âœ… Vuelta âœˆï¸ PanamÃ¡ - Lima 
ğŸ’µ Todo a ${data.itinerary10.cheapest.price} USD ğŸ’µ
                    </div>`;
                    cheapestInfo10.style.display = 'block';
                    data.itinerary10.offers.forEach(offer => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${offer.id}</td>
                            <td>${offer.solutionKeys}</td>
                            <td>$${offer.pricePerAdult}</td>
                            <td>${offer.fareFamily}</td>
                            <td>${offer.classOfService}</td>
                        `;
                        if (data.itinerary10.cheapest && data.itinerary10.cheapest.offerIds.includes(offer.id)) {
                            row.classList.add('cheapest');
                        }
                        tbody10.appendChild(row);
                    });
                    table10.style.display = 'table';
                } else if (data.itinerary10.error) {
                    errorDiv.innerHTML = `<i class="bi bi-exclamation-triangle-fill"></i> Error en itinerario 10 (Cartagena, stopover de regreso): ${data.itinerary10.error}`;
                    errorDiv.style.display = 'block';
                }
            } catch (error) {
                errorDiv.innerHTML = `<i class="bi bi-exclamation-triangle-fill"></i> ${error.message}`;
                errorDiv.style.display = 'block';
            } finally {
                loading.style.display = 'none';
            }
        }
    </script>
</body>
</html>